var SdenvExtend=function(){function t(t,e){return t===e||t!=t&&e!=e}function e(e,n){for(var r=e.length;r--;)if(t(e[r][0],n))return r;return-1}var n=Array.prototype.splice;function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}r.prototype.clear=function(){this.__data__=[],this.size=0},r.prototype.delete=function(t){var r=this.__data__,o=e(r,t);return!(o<0)&&(o==r.length-1?r.pop():n.call(r,o,1),--this.size,!0)},r.prototype.get=function(t){var n=this.__data__,r=e(n,t);return r<0?void 0:n[r][1]},r.prototype.has=function(t){return e(this.__data__,t)>-1},r.prototype.set=function(t,n){var r=this.__data__,o=e(r,t);return o<0?(++this.size,r.push([t,n])):r[o][1]=n,this};var o="object"==typeof global&&global&&global.Object===Object&&global,i="object"==typeof self&&self&&self.Object===Object&&self,s=o||i||Function("return this")(),c=s.Symbol,a=Object.prototype,u=a.hasOwnProperty,l=a.toString,f=c?c.toStringTag:void 0;var p=Object.prototype.toString;var d="[object Null]",h="[object Undefined]",g=c?c.toStringTag:void 0;function y(t){return null==t?void 0===t?h:d:g&&g in Object(t)?function(t){var e=u.call(t,f),n=t[f];try{t[f]=void 0;var r=!0}catch(t){}var o=l.call(t);return r&&(e?t[f]=n:delete t[f]),o}(t):function(t){return p.call(t)}(t)}function v(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var m="[object AsyncFunction]",b="[object Function]",w="[object GeneratorFunction]",_="[object Proxy]";function j(t){if(!v(t))return!1;var e=y(t);return e==b||e==w||e==m||e==_}var O,T=s["__core-js_shared__"],x=(O=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||""))?"Symbol(src)_1."+O:"";var P=Function.prototype.toString;function R(t){if(null!=t){try{return P.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var S=/^\[object .+?Constructor\]$/,E=Function.prototype,$=Object.prototype,A=E.toString,N=$.hasOwnProperty,D=RegExp("^"+A.call(N).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function L(t){return!(!v(t)||(e=t,x&&x in e))&&(j(t)?D:S).test(R(t));var e}function F(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return L(n)?n:void 0}var I=F(s,"Map"),k=F(Object,"create");var M=Object.prototype.hasOwnProperty;var C=Object.prototype.hasOwnProperty;function U(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function H(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function K(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}U.prototype.clear=function(){this.__data__=k?k(null):{},this.size=0},U.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},U.prototype.get=function(t){var e=this.__data__;if(k){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return M.call(e,t)?e[t]:void 0},U.prototype.has=function(t){var e=this.__data__;return k?void 0!==e[t]:C.call(e,t)},U.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=k&&void 0===e?"__lodash_hash_undefined__":e,this},K.prototype.clear=function(){this.size=0,this.__data__={hash:new U,map:new(I||r),string:new U}},K.prototype.delete=function(t){var e=H(this,t).delete(t);return this.size-=e?1:0,e},K.prototype.get=function(t){return H(this,t).get(t)},K.prototype.has=function(t){return H(this,t).has(t)},K.prototype.set=function(t,e){var n=H(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function z(t){var e=this.__data__=new r(t);this.size=e.size}z.prototype.clear=function(){this.__data__=new r,this.size=0},z.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},z.prototype.get=function(t){return this.__data__.get(t)},z.prototype.has=function(t){return this.__data__.has(t)},z.prototype.set=function(t,e){var n=this.__data__;if(n instanceof r){var o=n.__data__;if(!I||o.length<199)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new K(o)}return n.set(t,e),this.size=n.size,this};var q=function(){try{var t=F(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();function G(t,e,n){"__proto__"==e&&q?q(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function W(e,n,r){(void 0!==r&&!t(e[n],r)||void 0===r&&!(n in e))&&G(e,n,r)}var B,V=function(t,e,n){for(var r=-1,o=Object(t),i=n(t),s=i.length;s--;){var c=i[B?s:++r];if(!1===e(o[c],c,o))break}return t},J="object"==typeof exports&&exports&&!exports.nodeType&&exports,X=J&&"object"==typeof module&&module&&!module.nodeType&&module,Y=X&&X.exports===J?s.Buffer:void 0,Q=Y?Y.allocUnsafe:void 0;var Z=s.Uint8Array;function tt(t,e){var n,r,o=e?(n=t.buffer,r=new n.constructor(n.byteLength),new Z(r).set(new Z(n)),r):t.buffer;return new t.constructor(o,t.byteOffset,t.length)}var et=Object.create,nt=function(){function t(){}return function(e){if(!v(e))return{};if(et)return et(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function rt(t,e){return function(n){return t(e(n))}}var ot=rt(Object.getPrototypeOf,Object),it=Object.prototype;function st(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||it)}function ct(t){return null!=t&&"object"==typeof t}function at(t){return ct(t)&&"[object Arguments]"==y(t)}var ut=Object.prototype,lt=ut.hasOwnProperty,ft=ut.propertyIsEnumerable,pt=at(function(){return arguments}())?at:function(t){return ct(t)&&lt.call(t,"callee")&&!ft.call(t,"callee")},dt=Array.isArray,ht=9007199254740991;function gt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=ht}function yt(t){return null!=t&&gt(t.length)&&!j(t)}var vt="object"==typeof exports&&exports&&!exports.nodeType&&exports,mt=vt&&"object"==typeof module&&module&&!module.nodeType&&module,bt=mt&&mt.exports===vt?s.Buffer:void 0,wt=(bt?bt.isBuffer:void 0)||function(){return!1},_t="[object Object]",jt=Function.prototype,Ot=Object.prototype,Tt=jt.toString,xt=Ot.hasOwnProperty,Pt=Tt.call(Object);var Rt={};function St(t){return function(e){return t(e)}}Rt["[object Float32Array]"]=Rt["[object Float64Array]"]=Rt["[object Int8Array]"]=Rt["[object Int16Array]"]=Rt["[object Int32Array]"]=Rt["[object Uint8Array]"]=Rt["[object Uint8ClampedArray]"]=Rt["[object Uint16Array]"]=Rt["[object Uint32Array]"]=!0,Rt["[object Arguments]"]=Rt["[object Array]"]=Rt["[object ArrayBuffer]"]=Rt["[object Boolean]"]=Rt["[object DataView]"]=Rt["[object Date]"]=Rt["[object Error]"]=Rt["[object Function]"]=Rt["[object Map]"]=Rt["[object Number]"]=Rt["[object Object]"]=Rt["[object RegExp]"]=Rt["[object Set]"]=Rt["[object String]"]=Rt["[object WeakMap]"]=!1;var Et="object"==typeof exports&&exports&&!exports.nodeType&&exports,$t=Et&&"object"==typeof module&&module&&!module.nodeType&&module,At=$t&&$t.exports===Et&&o.process,Nt=function(){try{var t=$t&&$t.require&&$t.require("util").types;return t||At&&At.binding&&At.binding("util")}catch(t){}}(),Dt=Nt&&Nt.isTypedArray,Lt=Dt?St(Dt):function(t){return ct(t)&&gt(t.length)&&!!Rt[y(t)]};function Ft(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var It=Object.prototype.hasOwnProperty;function kt(e,n,r){var o=e[n];It.call(e,n)&&t(o,r)&&(void 0!==r||n in e)||G(e,n,r)}var Mt=9007199254740991,Ct=/^(?:0|[1-9]\d*)$/;function Ut(t,e){var n=typeof t;return!!(e=null==e?Mt:e)&&("number"==n||"symbol"!=n&&Ct.test(t))&&t>-1&&t%1==0&&t<e}var Ht=Object.prototype.hasOwnProperty;function Kt(t,e){var n=dt(t),r=!n&&pt(t),o=!n&&!r&&wt(t),i=!n&&!r&&!o&&Lt(t),s=n||r||o||i,c=s?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],a=c.length;for(var u in t)!e&&!Ht.call(t,u)||s&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Ut(u,a))||c.push(u);return c}var zt=Object.prototype.hasOwnProperty;function qt(t){if(!v(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=st(t),n=[];for(var r in t)("constructor"!=r||!e&&zt.call(t,r))&&n.push(r);return n}function Gt(t){return yt(t)?Kt(t,!0):qt(t)}function Wt(t){return function(t,e,n,r){var o=!n;n||(n={});for(var i=-1,s=e.length;++i<s;){var c=e[i],a=r?r(n[c],t[c],c,n,t):void 0;void 0===a&&(a=t[c]),o?G(n,c,a):kt(n,c,a)}return n}(t,Gt(t))}function Bt(t,e,n,r,o,i,s){var c=Ft(t,n),a=Ft(e,n),u=s.get(a);if(u)W(t,n,u);else{var l,f=i?i(c,a,n+"",t,e,s):void 0,p=void 0===f;if(p){var d=dt(a),h=!d&&wt(a),g=!d&&!h&&Lt(a);f=a,d||h||g?dt(c)?f=c:ct(l=c)&&yt(l)?f=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}(c):h?(p=!1,f=function(t,e){if(e)return t.slice();var n=t.length,r=Q?Q(n):new t.constructor(n);return t.copy(r),r}(a,!0)):g?(p=!1,f=tt(a,!0)):f=[]:function(t){if(!ct(t)||y(t)!=_t)return!1;var e=ot(t);if(null===e)return!0;var n=xt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Tt.call(n)==Pt}(a)||pt(a)?(f=c,pt(c)?f=Wt(c):v(c)&&!j(c)||(f=function(t){return"function"!=typeof t.constructor||st(t)?{}:nt(ot(t))}(a))):p=!1}p&&(s.set(a,f),o(f,a,r,i,s),s.delete(a)),W(t,n,f)}}function Vt(t,e,n,r,o){t!==e&&V(e,(function(i,s){if(o||(o=new z),v(i))Bt(t,e,s,n,Vt,r,o);else{var c=r?r(Ft(t,s),i,s+"",t,e,o):void 0;void 0===c&&(c=i),W(t,s,c)}}),Gt)}function Jt(t){return t}var Xt=Math.max;var Yt=q?function(t,e){return q(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:Jt,Qt=Yt,Zt=Date.now;var te,ee,ne,re=(te=Qt,ee=0,ne=0,function(){var t=Zt(),e=16-(t-ne);if(ne=t,e>0){if(++ee>=800)return arguments[0]}else ee=0;return te.apply(void 0,arguments)});function oe(t,e){return re(function(t,e,n){return e=Xt(void 0===e?t.length-1:e,0),function(){for(var r=arguments,o=-1,i=Xt(r.length-e,0),s=Array(i);++o<i;)s[o]=r[e+o];o=-1;for(var c=Array(e+1);++o<e;)c[o]=r[o];return c[e]=n(s),function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(t,this,c)}}(t,e,Jt),t+"")}var ie,se=(ie=function(t,e,n){Vt(t,e,n)},oe((function(e,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(i=ie.length>3&&"function"==typeof i?(o--,i):void 0,s&&function(e,n,r){if(!v(r))return!1;var o=typeof n;return!!("number"==o?yt(r)&&Ut(n,r.length):"string"==o&&n in r)&&t(r[n],e)}(n[0],n[1],s)&&(i=o<3?void 0:i,o=1),e=Object(e);++r<o;){var c=n[r];c&&ie(e,c,r,i)}return e}))),ce="[object Symbol]";function ae(t){return"symbol"==typeof t||ct(t)&&y(t)==ce}var ue=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,le=/^\w*$/;function fe(t,e){if(dt(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ae(t))||(le.test(t)||!ue.test(t)||null!=e&&t in Object(e))}var pe="Expected a function";function de(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(pe);var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var s=t.apply(this,r);return n.cache=i.set(o,s)||i,s};return n.cache=new(de.Cache||K),n}de.Cache=K;var he=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ge=/\\(\\)?/g,ye=function(t){var e=de(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(he,(function(t,n,r,o){e.push(r?o.replace(ge,"$1"):n||t)})),e}));function ve(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}var me=1/0,be=c?c.prototype:void 0,we=be?be.toString:void 0;function _e(t){if("string"==typeof t)return t;if(dt(t))return ve(t,_e)+"";if(ae(t))return we?we.call(t):"";var e=t+"";return"0"==e&&1/t==-me?"-0":e}function je(t){return null==t?"":_e(t)}function Oe(t,e){return dt(t)?t:fe(t,e)?[t]:ye(je(t))}var Te=1/0;function xe(t){if("string"==typeof t||ae(t))return t;var e=t+"";return"0"==e&&1/t==-Te?"-0":e}function Pe(t,e){for(var n=0,r=(e=Oe(e,t)).length;null!=t&&n<r;)t=t[xe(e[n++])];return n&&n==r?t:void 0}function Re(t,e,n){var r=null==t?void 0:Pe(t,e);return void 0===r?n:r}const Se={adapt:{},tools:{},utils:{},config:{timeInterval:void 0,timeTimeout:void 0,isNode:"undefined"==typeof window,envType:"browser",windowGetterUndefinedKeys:["_top","_parent","_length","_globalObject","_sdGlobalObject","_globalProxy","_registeredHandlers","_eventHandlers","_resourceLoader","_document","_origin","_sessionHistory","_virtualConsole","_runScripts","_frameElement","_pretendToBeVisual","_storageQuota","_commonForOrigin","_currentOriginData","_localStorage","_sessionStorage","_selection","_customElementRegistry","loadTextSync"],windowGetterErrorKeys:["process"],windowGetterWinKeys:["window","top","self","frames","globalThis"]},memory:{runinfo:{start:(new Date).getTime(),isDied:!1},timeout:null,SdenvExtend:null},cache:{dynamicCode:[],runloop:{},runsArr:[],runsObj:[],runtime:{},monitor:{},timeoutIdx:0,intervalIdx:0},datas:{dateAndRandom:{}}};function Ee(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new K;++e<n;)this.add(t[e])}function $e(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}Ee.prototype.add=Ee.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Ee.prototype.has=function(t){return this.__data__.has(t)};var Ae=1,Ne=2;function De(t,e,n,r,o,i){var s=n&Ae,c=t.length,a=e.length;if(c!=a&&!(s&&a>c))return!1;var u=i.get(t),l=i.get(e);if(u&&l)return u==e&&l==t;var f=-1,p=!0,d=n&Ne?new Ee:void 0;for(i.set(t,e),i.set(e,t);++f<c;){var h=t[f],g=e[f];if(r)var y=s?r(g,h,f,e,t,i):r(h,g,f,t,e,i);if(void 0!==y){if(y)continue;p=!1;break}if(d){if(!$e(e,(function(t,e){if(s=e,!d.has(s)&&(h===t||o(h,t,n,r,i)))return d.push(e);var s}))){p=!1;break}}else if(h!==g&&!o(h,g,n,r,i)){p=!1;break}}return i.delete(t),i.delete(e),p}function Le(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function Fe(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var Ie=1,ke=2,Me="[object Boolean]",Ce="[object Date]",Ue="[object Error]",He="[object Map]",Ke="[object Number]",ze="[object RegExp]",qe="[object Set]",Ge="[object String]",We="[object Symbol]",Be="[object ArrayBuffer]",Ve="[object DataView]",Je=c?c.prototype:void 0,Xe=Je?Je.valueOf:void 0;var Ye=Object.prototype.propertyIsEnumerable,Qe=Object.getOwnPropertySymbols,Ze=Qe?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var s=t[n];e(s,n,t)&&(i[o++]=s)}return i}(Qe(t),(function(e){return Ye.call(t,e)})))}:function(){return[]},tn=Ze,en=rt(Object.keys,Object),nn=Object.prototype.hasOwnProperty;function rn(t){return yt(t)?Kt(t):function(t){if(!st(t))return en(t);var e=[];for(var n in Object(t))nn.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)}function on(t){return function(t,e,n){var r=e(t);return dt(t)?r:function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}(r,n(t))}(t,rn,tn)}var sn=1,cn=Object.prototype.hasOwnProperty;var an=F(s,"DataView"),un=F(s,"Promise"),ln=F(s,"Set"),fn=F(s,"WeakMap"),pn="[object Map]",dn="[object Promise]",hn="[object Set]",gn="[object WeakMap]",yn="[object DataView]",vn=R(an),mn=R(I),bn=R(un),wn=R(ln),_n=R(fn),jn=y;(an&&jn(new an(new ArrayBuffer(1)))!=yn||I&&jn(new I)!=pn||un&&jn(un.resolve())!=dn||ln&&jn(new ln)!=hn||fn&&jn(new fn)!=gn)&&(jn=function(t){var e=y(t),n="[object Object]"==e?t.constructor:void 0,r=n?R(n):"";if(r)switch(r){case vn:return yn;case mn:return pn;case bn:return dn;case wn:return hn;case _n:return gn}return e});var On=jn,Tn=1,xn="[object Arguments]",Pn="[object Array]",Rn="[object Object]",Sn=Object.prototype.hasOwnProperty;function En(e,n,r,o,i,s){var c=dt(e),a=dt(n),u=c?Pn:On(e),l=a?Pn:On(n),f=(u=u==xn?Rn:u)==Rn,p=(l=l==xn?Rn:l)==Rn,d=u==l;if(d&&wt(e)){if(!wt(n))return!1;c=!0,f=!1}if(d&&!f)return s||(s=new z),c||Lt(e)?De(e,n,r,o,i,s):function(e,n,r,o,i,s,c){switch(r){case Ve:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case Be:return!(e.byteLength!=n.byteLength||!s(new Z(e),new Z(n)));case Me:case Ce:case Ke:return t(+e,+n);case Ue:return e.name==n.name&&e.message==n.message;case ze:case Ge:return e==n+"";case He:var a=Le;case qe:var u=o&Ie;if(a||(a=Fe),e.size!=n.size&&!u)return!1;var l=c.get(e);if(l)return l==n;o|=ke,c.set(e,n);var f=De(a(e),a(n),o,i,s,c);return c.delete(e),f;case We:if(Xe)return Xe.call(e)==Xe.call(n)}return!1}(e,n,u,r,o,i,s);if(!(r&Tn)){var h=f&&Sn.call(e,"__wrapped__"),g=p&&Sn.call(n,"__wrapped__");if(h||g){var y=h?e.value():e,v=g?n.value():n;return s||(s=new z),i(y,v,r,o,s)}}return!!d&&(s||(s=new z),function(t,e,n,r,o,i){var s=n&sn,c=on(t),a=c.length;if(a!=on(e).length&&!s)return!1;for(var u=a;u--;){var l=c[u];if(!(s?l in e:cn.call(e,l)))return!1}var f=i.get(t),p=i.get(e);if(f&&p)return f==e&&p==t;var d=!0;i.set(t,e),i.set(e,t);for(var h=s;++u<a;){var g=t[l=c[u]],y=e[l];if(r)var v=s?r(y,g,l,e,t,i):r(g,y,l,t,e,i);if(!(void 0===v?g===y||o(g,y,n,r,i):v)){d=!1;break}h||(h="constructor"==l)}if(d&&!h){var m=t.constructor,b=e.constructor;m==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b||(d=!1)}return i.delete(t),i.delete(e),d}(e,n,r,o,i,s))}function $n(t,e,n,r,o){return t===e||(null==t||null==e||!ct(t)&&!ct(e)?t!=t&&e!=e:En(t,e,n,r,$n,o))}var An=1,Nn=2;function Dn(t){return t==t&&!v(t)}function Ln(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}function Fn(t){var e=function(t){for(var e=rn(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,Dn(o)]}return e}(t);return 1==e.length&&e[0][2]?Ln(e[0][0],e[0][1]):function(n){return n===t||function(t,e,n,r){var o=n.length,i=o,s=!r;if(null==t)return!i;for(t=Object(t);o--;){var c=n[o];if(s&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++o<i;){var a=(c=n[o])[0],u=t[a],l=c[1];if(s&&c[2]){if(void 0===u&&!(a in t))return!1}else{var f=new z;if(r)var p=r(u,l,a,t,e,f);if(!(void 0===p?$n(l,u,An|Nn,r,f):p))return!1}}return!0}(n,t,e)}}function In(t,e){return null!=t&&e in Object(t)}function kn(t,e){return null!=t&&function(t,e,n){for(var r=-1,o=(e=Oe(e,t)).length,i=!1;++r<o;){var s=xe(e[r]);if(!(i=null!=t&&n(t,s)))break;t=t[s]}return i||++r!=o?i:!!(o=null==t?0:t.length)&&gt(o)&&Ut(s,o)&&(dt(t)||pt(t))}(t,e,In)}var Mn=1,Cn=2;function Un(t){return fe(t)?(e=xe(t),function(t){return null==t?void 0:t[e]}):function(t){return function(e){return Pe(e,t)}}(t);var e}function Hn(t){return"function"==typeof t?t:null==t?Jt:"object"==typeof t?dt(t)?(e=t[0],n=t[1],fe(e)&&Dn(n)?Ln(xe(e),n):function(t){var r=Re(t,e);return void 0===r&&r===n?kn(t,e):$n(n,r,Mn|Cn)}):Fn(t):Un(t);var e,n}var Kn=function(t,e){return function(n,r){if(null==n)return n;if(!yt(n))return t(n,r);for(var o=n.length,i=e?o:-1,s=Object(n);(e?i--:++i<o)&&!1!==r(s[i],i,s););return n}}((function(t,e){return t&&V(t,e,rn)}));function zn(t,e){if(t!==e){var n=void 0!==t,r=null===t,o=t==t,i=ae(t),s=void 0!==e,c=null===e,a=e==e,u=ae(e);if(!c&&!u&&!i&&t>e||i&&s&&a&&!c&&!u||r&&s&&a||!n&&a||!o)return 1;if(!r&&!i&&!u&&t<e||u&&n&&o&&!r&&!i||c&&n&&o||!s&&o||!a)return-1}return 0}function qn(t,e,n){e=e.length?ve(e,(function(t){return dt(t)?function(e){return Pe(e,1===t.length?t[0]:t)}:t})):[Jt];var r=-1;e=ve(e,St(Hn));var o=function(t,e){var n=-1,r=yt(t)?Array(t.length):[];return Kn(t,(function(t,o,i){r[++n]=e(t,o,i)})),r}(t,(function(t,n,o){return{criteria:ve(e,(function(e){return e(t)})),index:++r,value:t}}));return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(o,(function(t,e){return function(t,e,n){for(var r=-1,o=t.criteria,i=e.criteria,s=o.length,c=n.length;++r<s;){var a=zn(o[r],i[r]);if(a)return r>=c?a:a*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))}function Gn(){const t=this,e=t.getTools("addUtil"),n={},r=t.memory.window;let o=0,i=!1;function s(){runloop=t.cache.runloop={current:1},o++}const c=(t=o)=>t===o&&(i=!0),a=(t=o)=>t===o&&(i=!1),u=(t=o)=>t===o&&i;s(),e(((e,o,s,l="",f=0)=>{const p=[],d=runloop.current++;runloop[e]||(runloop[e]=[]);const h={idx:o,name:s,data:p,current:d,idxs:[],list:Array.isArray(l)?l.join():l,lens:f||(Array.isArray(l)?l.length:-1),pre:{current:n.cur,curloop:n.num},param:{}};return n.loop&&(n.loop.param[n.loop.data.length-1]={next:d}),runloop[e].push(h),i&&r.console.log(`【RUN TASK】current：${d}`),{addLoop:(e,r,o)=>(h.data.push(r),h.idxs.push(e),Object.assign(n,{key:o,cur:d,num:p.length,loop:h}),(...e)=>{i&&console.log([`(${d}，${p.length})`,...e.map((e=>t.tools.compressText(e,200)))].join(" ==== "))}),curLoop:()=>p.length,current:d,loopobj:h,openLog:c,closeLog:a,isLog:u}}),"initLoop"),e((()=>({...n})),"getPreLoop"),e(u,"getLogLoop"),e(a,"closeLogLoop"),e(c,"openLogLoop"),e(s,"clearLoop"),e((t=>{const e=JSON.parse(JSON.stringify(runloop)),n={};Object.entries(e).forEach((([t,e])=>{var r,o,i,s;Array.isArray(e)&&(n[t]={},e.forEach((e=>{e.data.forEach((e=>{void 0===n[t][e]&&(n[t][e]=0),n[t][e]++})),e.data=e.data.join(),e.idxs=e.idxs.join()})),n[t]=(r=Object.entries(n[t]).map((([t,e])=>({code:t,num:e}))),o="num",i="desc",null==r?[]:(dt(o)||(o=null==o?[]:[o]),dt(i=s?void 0:i)||(i=null==i?[]:[i]),qn(r,o,i))))}));const r=JSON.stringify(e);return t&&("function"==typeof t?(t(r),console.log("运行时数据复制成功")):console.log(r)),{ascii:n,copystr:r,...e}}),"getLoopData")}function Wn(t,e,n){if("object"!=typeof t)throw new Error(`addConstant方法报错，传入数据非对象: ${t}`);Object.defineProperty(t,e,{configurable:!1,enumerable:!0,writable:!1,value:n})}let Bn=Function.toString;const Vn=[],Jn=function(){return Vn.includes(this.name)?`function ${this.name||""}() { [native code] }`:Bn.call(this)},Xn=function(t,e,n){if(t)return"string"==typeof e?Object.defineProperty(t,"name",{value:e}):"number"==typeof e&&(n=e),"number"==typeof n&&Object.defineProperty(t,"length",{value:n}),Vn.push(t.name),Object.defineProperty(t,"toString",{enumerable:!1,configurable:!0,writable:!0,value:Jn}),t},Yn=function(t,e){return Object.defineProperty(t,"name",{configurable:!0,enumerable:!1,writable:!1,value:e}),t},Qn=function(t,e,n){return Yn(t,e),Xn(t,e,n),t};Xn(Jn,"toString");const Zn=function(t,e){return Object.defineProperty(t,"toString",{enumerable:!1,configurable:!0,writable:!0,value:()=>`[object ${e}]`}),t},tr=function(t,e){return Object.defineProperty(t,Symbol.toStringTag,{configurable:!0,enumerable:!1,writable:!1,value:e}),t},er=function(t,e){return tr(t,e),Zn(t,e),t};const nr=function(){this.cache=null,this.add=t=>{if(!this.cache)return!1;this.cache.task.includes(t)||this.cache.task.push(t)},this.set=t=>this.cache=t,this.get=()=>this.cache,this.getTime=()=>!!this.cache&&this.cache.time,this.getTask=t=>!!this.cache&&("number"==typeof t?this.cache.task[t]:this.cache.task),this.clear=()=>this.cache=null};class rr{constructor(t){this.sdenv=t,this.index=[],this.timeouts={},this.lastOp=t.memory.runinfo.start,this.isLock=!1,this.id=0,this.currentTask=new nr}addTimeout(t,e,n="timeout",r=this.index.length){const{sdenv:o}=this;let i=(new o.memory.Date).getTime()-o.memory.runinfo.start+e;const s={func:t,type:n,flag:0,time:e,expect_time:i,real_time:null,index:r,id:this.id++};return this.index[r]?this.index[r]=s:this.index.push(s),0===e&&this.currentTask.get()?(i=this.currentTask.getTime(),this.timeouts[i].push(s),this.currentTask.add(s)):(void 0===this.timeouts[i]&&(this.timeouts[i]=[]),this.timeouts[i].push(s),this.sdenv.tools.isAlive()&&this.exec()),r}addInterval(t,e,n=void 0){const r=this;return n=this.addTimeout((function(){try{t()}catch(t){console.error(t)}finally{-1!==r.index[n].flag&&r.addInterval(t,e,n)}}),e,"interval",n)}remove(t){if("number"!=typeof t||!this.index[t])return!1;if(0===this.index[t].flag)this.index[t].flag=-1;else{if([-1,2].includes(this.index[t].flag))return;if(1===this.index[t].flag)return!1}}exec(){this.isLock||(this.isLock=!0,this.sdenv.memory.setTimeout((()=>{this.isLock=!1,this.run()}),0))}run(){const{sdenv:t}=this,e=t.memory.window,n=Object.keys(this.timeouts).filter((e=>!(Number(e)+t.memory.runinfo.start<=this.lastOp)));if(0===n.length)return!1;this.lastOp=Number(n[0])+t.memory.runinfo.start,this.currentTask.set({task:this.timeouts[n[0]],time:n[0]});for(let r=0;this.currentTask.getTask(r);r++){const o=this.currentTask.getTask(r);if(this.sdenv.tools.isDied()||-1===o.flag)return;const i=o.func.param?JSON.stringify(o.func.param):t.tools.compressText(o.func.toString());e.console.log(`【TIMEOUT RUN】执行程序时间${n[0]}处${o.type}回调，延时：${o.time}，编号：${o.id}，方法：${i}`),o.flag=1,o.real_time=(new t.memory.Date).getTime()-t.memory.runinfo.start;try{o.func(),e.console.log(`【TIMEOUT RUNED】执行程序时间${n[0]}处${o.type}回调，延时：${o.time}，编号：${o.id}，方法：${i}`)}catch(t){console.error(t)}o.flag=2}this.currentTask.clear(),this.sdenv.tools.isDied()||(n.length>1?this.run():this.exec())}}function or(){this.memory.timeout||(this.memory.timeout=new rr(this))}var ir=Object.freeze({__proto__:null,_setFuncInit:function(t){Xn(Jn,"toString"),t.Function.prototype.toString=Jn,Jn.__proto__=t.Function.prototype},addConstant:Wn,addConstants:function(t,e){for(const n in e){Wn(t,n,e[n])}},addInterval:function(t,e){return or.call(this),this.memory.timeout.addInterval(t,e)},addRuntimeData:function(t,e,n){this.cache.runtime[t]||(this.cache.runtime[t]={});const r=this.cache.runtime[t];return r[e]||(r[e]=[]),r[e].push(n),n},addTimeout:function(t,e){return or.call(this),this.memory.timeout.addTimeout(t,Number(e||0),"timeout")},addUtil:function(t,e){return this.utils[e||t.name]=t.bind(this),t},compressText:function(t,e=100){return"string"!=typeof t&&(t=`${t}`),t.length<=e?t:t.replace(/[\n\s\r]+/g," ").slice(0,e)+"......"},delay:function(t){const e=this;return new Promise((n=>Re(e,"memory.setTimeout",setTimeout)(n,t)))},exit:function(t){const e=this.memory.window;this.getTools("setDied")(),t.eventId&&e.dispatchEvent(new e.CustomEvent(`sdenv:${t.eventId}`,{detail:t})),e.dispatchEvent(new e.CustomEvent("sdenv:exit",{detail:t})),t.url&&e.onbeforeunload?.(t.url)},getMonitor:function(t){return t?this.cache.monitor[t]:this.cache.monitor},getNativeProto:function(t,e,n={}){const r=Qn((()=>{throw new TypeError("Illegal constructor")}),t);return[r,er({__proto__:r,...n},t)]},getRuntimeData:function(t,e){return Re(this,["cache.runtime",t,e].filter((t=>void 0!==t)).join("."))},getUtil:function(t){return this.utils[t]},isAlive:function(){return!this.memory.runinfo.isDied},isDied:function(){return this.memory.runinfo.isDied},isWindow:function(t){return t&&t===t.window},mixin:function(t,e,n=[]){const r=Reflect.ownKeys(e);for(let o=0;o<r.length;++o)r[o]in t&&!n.includes(r[o])||Object.defineProperty(t,r[o],Object.getOwnPropertyDescriptor(e,r[o]))},monitor:function(t,e,n={}){const r=this.memory.window,o=this.tools,{getLog:i,setLog:s,log:c,getKeys:a=[],setKeys:u=[],keys:l=[],getCb:f,setCb:p,cb:d,getParse:h=((t,e)=>e),setParse:g=((t,e)=>e),handles:y={}}=n;this.cache.monitor[e]||(this.cache.monitor[e]=[]),t.sdMonitorName=e;const v=new r.Proxy(t,{get:(t,n,o)=>((i||c)&&r.console.log(`${e} Getting ${n}`),a.includes(n)||l.includes(n),(f||d)?.(n,e),h(n,t[n],t)),set(t,n,i,a){const f=[r,r.Math,r.navigation].includes(i)&&i.toString?i.toString():i;return!s&&!c||Array.isArray(t)&&"length"===n||r.console.log(`${e} Setting ${n} to ${o.compressText(f)}`),u.includes(n)||l.includes(n),(p||d)?.(n,i,e),Reflect.set(t,n,g(n,i,t),a)},...y});return this.cache.monitor[e].push(v),v},monitorFunction:function(t,e,n={}){const r=this.memory.window,{log:o,isDebugger:i,cb:s}=n;this.cache.monitor[e]||(this.cache.monitor[e]=[]);const c=new r.Proxy(t,{apply(t,n,i){const c=Reflect.apply(t,n,i);return o&&r.console.log(`${e} Apply ${i}`),s?.(i,c,e),c}});return this.cache.monitor[e].push(c),c},removeInterval:function(t){return or.call(this),this.memory.timeout.remove(t)},removeTimeout:function(t){return or.call(this),this.memory.timeout.remove(t)},setDied:function(){this.memory.runinfo.isDied=!0},setFuncName:Yn,setFuncNative:Xn,setNativeFuncName:Qn,setNativeObjName:er,setObjName:tr,setObjNative:Zn,setToString:function(t){Object.defineProperty(t,"toString",{configurable:!0,enumerable:!1,writable:!1,value:Jn})},toString:Jn,wrapFunc:function(t,e,n,r=!0){const o=t[e],i=function(...t){return n.call(this,r?o.bind(this):o,...t)};return Xn(i,e,o.length),t[e]=i,i}});function sr(t,e={},n=0,r=[0],o=null){void 0===e._count&&(e._count=0);const{monitor:i={},...s}=((t,e={})=>{const n=Object.keys(t).map((e=>[e,typeof t[e]])),r={},o=n.filter((([t,e])=>"string"===e)).map((t=>t[0])),i=n.filter((([t,e])=>"number"===e)).map((t=>t[0])),s=n.filter((([e,n])=>"object"===n&&Array.isArray(t[e]))).map((t=>t[0]));return 1!==o.length||2!==i.length||2!==s.length?(console.error("任务树结构有变化，请手动传入！"),e):(r.taskKey=o[0],[r.lensKey,r.isResetKey]=t[i[0]]>t[i[1]]?i:i.reverse(),[r.oneKey,r.twoKey]=t[s[0]].length>t[s[1]].length?s:s.reverse(),Object.assign(e,r),e)})(t,e),{taskKey:c,oneKey:a,twoKey:u,lensKey:l,isResetKey:f}=s,p=t[c];return t.parent=o,t.str=p,t.val={},p?(t.arr=p.split("").map((t=>t.charCodeAt())),e._count>0&&(t[c]=[...t.arr])):(t.arr=[],t[c]=[]),t.idx=`${r.join(">")}-${e._count++}`,t.uid=function(t){const e=[];for(let n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return"U"+String.fromCharCode(...e).split("").map((t=>t.charCodeAt())).join("")}([n,t[l],t[f],t.arr.length,t[a].length,t[u].length].join("-")),[a,u].forEach(((o,c)=>{t[o]=t[o].map(((o,a)=>o?(sr.call(this,o,e,n+1,[...r,["one","two"][c],a],t),this.getTools("monitor")(o,o.idx,{setLog:!1,...i,parse:i.parse?(t,e)=>i.parse(t,e,o.idx,s):void 0})):o))})),t}var cr=Object.freeze({__proto__:null,parseTaskTree:function(...t){this.cache.runsObj=sr.call(this,...t),this.cache.runsArr=[]}}),ar=Object.freeze({__proto__:null,rs:cr});const ur={'!new function(){eval("this.a=1")}().a':()=>!1};var lr=/\s/;var fr=/^\s+/;function pr(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&lr.test(t.charAt(e)););return e}(t)+1).replace(fr,""):t}var dr=NaN,hr=/^[-+]0x[0-9a-f]+$/i,gr=/^0b[01]+$/i,yr=/^0o[0-7]+$/i,vr=parseInt;function mr(t){if("number"==typeof t)return t;if(ae(t))return dr;if(v(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=v(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=pr(t);var n=gr.test(t);return n||yr.test(t)?vr(t.slice(2),n?2:8):hr.test(t)?dr:+t}var br=1/0,wr=17976931348623157e292;function _r(t){var e=function(t){return t?(t=mr(t))===br||t===-br?(t<0?-1:1)*wr:t==t?t:0:0===t?t:0}(t),n=e%1;return e==e?n?e-n:e:0}var jr=s.isFinite,Or=Math.min;var Tr=function(t){var e=Math[t];return function(t,n){if(t=mr(t),(n=null==n?0:Or(_r(n),292))&&jr(t)){var r=(je(t)+"e").split("e");return+((r=(je(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}("round");const xr=Tr(Math.random(),2),Pr={charging_success:{charging:!0,chargingTime:0,dischargingTime:1/0,level:1},discharging_success:{charging:!1,chargingTime:1/0,dischargingTime:1/0,level:1},charging_ing:{charging:!0,chargingTime:100*(1-xr)*300,dischargingTime:1/0,level:xr},discharging_ing:{charging:!1,chargingTime:1/0,dischargingTime:100*xr*443,level:xr}};function Rr(t,{datas:e}){if(this.sdenv=t,e&&Array.isArray(e._newdate)&&Array.isArray(e._newdate[0])&&(e._newdate=e._newdate.reduce(((t,[e,n])=>[...t,...new Array(n).fill(e)]),[])),this.data=e||{},this.data?.firstMap&&Object.values(this.data.firstMap).some((t=>!t)))throw new Error("日期首位配置错误请检查");this.runs=[],Object.assign(this,{_now:t.memory.Date.now,_parse:t.memory.Date.parse,_valueOf:t.memory.Date.prototype.valueOf,_getTime:t.memory.Date.prototype.getTime,_toString:t.memory.Date.prototype.toString,_random:t.memory.Math.random})}Rr.prototype.shift=function(t){const{firstMap:e}=this.data;let n=this.data[t].shift();return"number"==typeof e[t]&&(n+=e[t]),this.runs.push(n),n},Rr.prototype.wrapFun=function(t,e){const n=`_${t}`;if(!this[n])return;void 0!==e||Array.isArray(this.data[n])||(this.data[n]=[]);const r=this;return this.sdenv.getTools("setNativeFuncName")((function(){if(void 0!==e)return e;if(r.data.firstMap?.[n]){if(!r.data[n].length)throw new Error(`DateAndRandom的${n}数据不够`);return r.shift(n)}const t=r[n].call(this);return r.data[n].push(t),t}),t)},Rr.prototype.wrapClass=function(t,e){const n=`_${t}`;Array.isArray(this.data[n])||(this.data[n]=[]);const r=this;return this.sdenv.getTools("setNativeFuncName")(new Proxy(e,{construct(t,o,i){if(r.data.firstMap?.[n]){if(!r.data[n].length)throw new Error(`DateAndRandom的${n}数据不够`);return new e(r.shift(n))}const s=Reflect.construct(t,o,i);return r.data[n].push(sdenv.memory.Date.prototype.valueOf.call(s)),s},apply:(t,e,n)=>Reflect.apply(t,e,n)}),e.name||t)},Rr.prototype.getData=function(t){const e=Object.entries(this.data).reduce(((t,[e,n])=>{if("firstMap"===e||!n.length)return t;if("_random"===e)return t[e]=n,t.firstMap[e]=!0,t;const r=n[0];return t.firstMap[e]=r,t[e]="_newdate"===e?n.map((t=>t-r)).reduce(((t,e)=>(0===t.length||t[t.length-1][0]!==e?t.push([e,1]):t[t.length-1][1]+=1,t)),[]):n.map((t=>t-r)),t}),{firstMap:{}});return t&&(t(JSON.stringify(e)),console.log("日期与随机数数据复制成功")),e};var Sr=Object.freeze({__proto__:null,batteryHandle:function(t){"string"==typeof t?t=Pr[t]||{}:"object"!=typeof t&&(t={}),this.memory.window.navigator.getBattery=this.getTools("setNativeFuncName")((()=>new Promise(((e,n)=>{e({onchargingchange:null,onchargingtimechange:null,ondischargingtimechange:null,onlevelchange:null,...Pr.charging_success,...t})}))),"getBattery")},connectionHandle:function(t){const e=this.memory.window;"object"!=typeof t&&(t={}),this.getTools("addConstants")(e.navigator.connection,{downlink:6.66,effectiveType:"4g",onchange:null,rtt:0,saveData:!1,...t})},cookieHandle:function(t){"object"!=typeof t&&(t={});const e=this,n=this.memory.window,{getLog:r,setLog:o,log:i,getCb:s,setCb:c,cb:a,parse:u=(t=>t)}=t,l={};Object.defineProperty(n.document,"cookie",{configurable:!1,enumerable:!1,get(){const t=e.memory.cookieGet();return(r||i)&&n.console.log(`【GET COOKIE】长：${t.length} 值：${t}`),(s||a)?.(t),t},set(t){const r=t.split("=")[0];void 0===l[r]?l[r]=1:l[r]++,(o||i)&&n.console.log(`【SET COOKIE】次数：${l[r]} 长：${t.length} 值：${t}`),(c||a)?.(t,r,l[r]),e.memory.cookieSet(u(t))}})},cookieInit:function(t){if(t.cookieGet)return;const e=t.window;t.cookieGet=(...t)=>Object.getOwnPropertyDescriptor(e.Document.prototype,"cookie").get.call(e.document,...t),t.cookieSet=(...t)=>Object.getOwnPropertyDescriptor(e.Document.prototype,"cookie").set.call(e.document,...t)},dateAndRandomHandle:function(t){"object"!=typeof t&&(t={});const e=this.memory.window,{randomReturn:n=this.config.randomReturn}=t,r=new Rr(this,t);this.getTools("addUtil")(r.getData.bind(r),"getDateData"),e.Date=r.wrapClass("newdate",e.Date),e.Date.now=r.wrapFun("now"),e.Date.parse=r.wrapFun("parse"),e.Math.random=r.wrapFun("random",n)},dateAndRandomInit:["Date","Math"],evalHandle:function(t){"object"!=typeof t&&(t={});const e=this.memory.window,{cb:n,log:r}=t,o=this;e.eval=this.getTools("setNativeFuncName")(new Proxy(e.eval,{apply(t,i,s){r&&e.console.log(`【EVAL APPLY】参数：${s.map((t=>o.getTools("compressText")(JSON.stringify(t))))}`);const c=s.map((t=>ur[t]?ur[t]:(t.includes("debugger")&&(t=t.replace(/debugger/g,"")),t.includes("sdDebugger")&&(t=t.replace(/sdDebugger/g,"debugger")),t))),a={type:"eval",params:s,tar_params:c};return n?.(a),o.cache.dynamicCode.push({...a}),Reflect.apply(t,i,c)}}),"eval")},evalInit:["eval"],eventHandle:function(t){const e=this,n=this.memory.window;"object"!=typeof t&&(t={});const{addLog:r,runLog:o,log:i,addCb:s,runCb:c,cb:a,filter:u=(()=>!0),parse:l=((t,...e)=>e)}=t;n.addEventListener=n.document.addEventListener=this.getTools("setFuncNative")(new Proxy(n.addEventListener,{apply:function(t,f,p){if(!u||!u(...p))return;const[d,h]=p,g=h.param?JSON.stringify(h.param):e.getTools("compressText")(h.toString());return(r||i)&&n.console.log(`【ADD EVENT】事件名：${d}, 方法：${g}`),(s||a)?.(...p),Reflect.apply(t,f,[d,(...t)=>{(c||a)?.(...p),(o||i)&&n.console.log(`【RUN EVENT】事件名：${d}, 方法：${g}`),h(...l(d,t))}])}}),"addEventListener",2)},eventInit:["addEventListener"],funcHandle:function(t){const e=this;"object"!=typeof t&&(t={});const n=this.memory.window,{log:r,cb:o}=t;n.Function=this.getTools("setNativeFuncName")(new Proxy(n.Function,{apply(t,i,s){const c=s.map((t=>(t.includes("debugger")&&(t=t.replace(/debugger/g,"")),t.includes("sdDebugger")&&(t=t.replace(/sdDebugger/g,"debugger")),t)));r&&n.console.log(`【FUNCTION APPLY】参数：${s.map((t=>e.getTools("compressText")(JSON.stringify(t))))}`);const a={type:"Function",params:s,tar_params:c};return o?.(a),e.cache.dynamicCode.push({...a}),Reflect.apply(t,i,c)}}),"Function"),n.Function.prototype.constructor=n.Function,this.getTools("setNativeFuncName")(n.Function.prototype,"")},funcInit:["Function"],indexedDBHandle:function(t){"object"!=typeof t&&(t={});const e=this.memory.window,{cb:n,log:r,getLog:o,setLog:i,getCb:s,setCb:c,filter:a=(()=>!0)}=t,u=this;e.IDBFactory.prototype.open=this.getTools("setFuncNative")(new Proxy(e.IDBFactory.prototype.open,{apply(t,l,f){r&&e.console.log(`【indexedDB.open APPLY】参数：${f.map((t=>u.getTools("compressText")(JSON.stringify(t))))}`);const p=f[0];n?.({name:p,version:f[1],params:f});const d=new Proxy(Reflect.apply(t,l,f),{set:(t,o,s,l)=>["onupgradeneeded","onsuccess","onerror"].includes(o)?((i||r)&&e.console.log(`indexedDB ${p} Setting ${o} to ${u.tools.compressText(s.toString())}`),(c||n)?.(o,s,p),a&&a(o)||(s=()=>{}),t[o]=s,!0):Reflect.set(t,o,s,l),get(t,r,i){o&&e.console.log(`indexedDB ${p} Getting ${r}`),(s||n)?.(r,p);try{let e=Reflect.get(t,r);return"function"==typeof e&&(e=e.bind(t)),e}catch(t){return void e.console.warn(`indexedDB ${p} Getting ${r} failed:`,t)}}});return d}}),"open",1)},intervalHandle:function(t){const e=this;"object"!=typeof t&&(t={});const n=this.memory.window,{log:r,cb:o,time:i,filter:s=(()=>!0)}=t;n.setInterval=this.getTools("setNativeFuncName")(new Proxy(n.setInterval,{apply:function(t,c,a){const u=e.cache.intervalIdx=e.cache.intervalIdx+1;if(!s||!s(...a))return;const[l,f]=a,p=l.param?JSON.stringify(l.param):e.getTools("compressText")(l.toString());if(r&&n.console.log(`【INTERVAL APPLY】增加setInterval事件，时间：${f}, 方法:${p}`),void 0!==i){if("number"!=typeof i)throw new Error("time配置如果存在值则必须是数字");return Reflect.apply(t,c,[()=>{r&&n.console.log(`【INTERVAL RUN】setInterval执行，时间：${f}，方法：${p}`),o&&o("run_before",u),l(),r&&n.console.log(`【INTERVAL RUNED】setInterval执行，时间：${f}，方法：${p}`),o&&o("run_after",u)},i||f])}return e.getTools("addInterval")(l,f)}}),"setInterval")},intervalInit:["setInterval"],ovserverHandle:function(t){const e=this;"object"!=typeof t&&(t={});const n=this.memory.window,{newLog:r,addLog:o,runLog:i,log:s,addCb:c,runCb:a,newCb:u,cb:l,filter:f=(()=>!0)}=t;n.MutationObserver=this.getTools("setNativeFuncName")(new Proxy(n.MutationObserver,{construct:function(t,p,d){const[h]=p,g=h.param?JSON.stringify(h.param):e.getTools("compressText")(h.toString());(r||s)&&n.console.log(`【NEW OVSERVER】方法：${g}`),(u||l)?.(...p);const y=Reflect.construct(t,[async(...t)=>{var e;((i||s)&&n.console.log(`【RUN OVSERVER】方法：${g}`),(a||l)?.(...t[0]),f&&f(...p))&&(await(e=0,new Promise((t=>n.setTimeout(t,e)))),h(...t))}],d);return y.observe=new Proxy(y.observe,{apply:function(t,e,r){return(o||s)&&n.console.log(`【ADD OVSERVER】方法：${g}`),(c||l)?.(...r),Reflect.apply(t,e,r)}}),y}}),"MutationObserver")},ovserverInit:["MutationObserver"],requestFileSystemHandle:function(t){"object"!=typeof t&&(t={});const e=this.memory.window,{cb:n,log:r,filter:o}=t,i=this;e.webkitRequestFileSystem&&(e.webkitRequestFileSystem=this.getTools("setFuncNative")(new Proxy(e.webkitRequestFileSystem,{apply(t,s,c){if(r&&e.console.log(`【webkitRequestFileSystem APPLY】参数：${c.map((t=>i.getTools("compressText")(JSON.stringify(t))))}`),n?.({type:c[0]?"window.PERSISTENT":"window.TEMPORARY",size:c[1],params:c}),o&&o(...c))return Reflect.apply(t,s,c)}}),"webkitRequestFileSystem",3))},requestFileSystemInit:["webkitRequestFileSystem"],requestHandle:function(t){const e=this;"object"!=typeof t&&(t={});const n=this.memory.window;e._registerConfig("handle:request",t,(()=>{var n;t.log=(n=t.log)&&"function"!=typeof n?(t,...r)=>{Array.isArray(n)&&!n.includes(r[0])||e.memory.window.console.log(`【REQUEST HANDLE】${t}: `,r[0])}:n})),n.XMLHttpRequest=new n.Proxy(n.XMLHttpRequest,{construct(t,e,r){const o=n.Reflect.construct(t,e,r);return o.__xhr={headers:{}},o}}),n.XMLHttpRequest.prototype.open=function(n,r,o){return Object.assign(this.__xhr,{method:n,url:r,async:o}),t.log?.("open",this.__xhr),t.cb?.("open",this.__xhr),e.memory["XMLHttpRequest.prototype.open"].apply(this,arguments)},n.XMLHttpRequest.prototype.setRequestHeader=function(n,r){return this.__xhr.headers[n]=r,t.log?.("header",this.__xhr),t.cb?.("header",this.__xhr),e.memory["XMLHttpRequest.prototype.setRequestHeader"].apply(this,arguments)},n.XMLHttpRequest.prototype.send=function(n){this.__xhr.body=n,t.log?.("send",this.__xhr),t.cb?.("send",this.__xhr);const r=this;return this.addEventListener("load",(function(){try{Object.assign(r.__xhr,{status:r.status,responseURL:r.responseURL,responseType:r.responseType,response:r.responseType&&"text"!==r.responseType?r.response:r.responseText}),t.log?.("load",r.__xhr),t.cb?.("load",r.__xhr)}catch(t){}})),this.addEventListener("error",(function(){t.log?.("error",r.__xhr),t.cb?.("error",r.__xhr)})),e.memory["XMLHttpRequest.prototype.send"].apply(this,arguments)}},requestInit:["XMLHttpRequest","XMLHttpRequest.prototype.open","XMLHttpRequest.prototype.setRequestHeader","XMLHttpRequest.prototype.send"],timeoutHandle:function(t){const e=this;"object"!=typeof t&&(t={});const n=this.memory.window,{log:r,cb:o,time:i,filter:s=(()=>!0)}=t;n.setTimeout=this.getTools("setNativeFuncName")(new Proxy(n.setTimeout,{apply:function(t,c,a){const u=e.cache.timeoutIdx=e.cache.timeoutIdx+1;if(!s||!s(...a))return;const[l,f]=a,p=l.param?JSON.stringify(l.param):e.getTools("compressText")(l.toString());if(r&&n.console.log(`【TIMEOUT APPLY】增加setTimeout事件，时间：${f}, 方法: ${p}`),void 0!==i){if("number"!=typeof i)throw new Error("time配置如果存在值则必须是数字");return Reflect.apply(t,c,[()=>{r&&n.console.log(`【TIMEOUT RUN】setTimeout执行，时间：${f}，方法：${p}`),o&&o("run_before",u),l(),r&&n.console.log(`【TIMEOUT RUNEND】setTimeout执行，时间：${f}，方法：${p}`),o&&o("run_after",u)},i||f])}return e.getTools("addTimeout")(l,f)}}),"setTimeout")},timeoutInit:["setTimeout"],windowHandle:function(t={}){if(!this.config.isNode)return void console.error("该方法只在node环境下有效!");const e=this,n=require("vm");"object"!=typeof t&&(t={});let r=!1;const o={win:void 0,func:void 0,context:void 0,ori:void 0,proxyRecord:new WeakMap};["Undefined","Error","Win"].forEach((n=>{const r=`windowGetter${n}Keys`;if(void 0===t[r]&&(t[r]=[]),!Array.isArray(t[r]))throw new Error(`参数${r}值必须为数组请检查！`);t[r].push(...e.config[r])})),e._registerConfig("handle:window",t,(()=>{var n,r;t.log=(n=t.log)&&"function"!=typeof n?(t,...r)=>{Array.isArray(n)&&!n.includes(r[0])||e.memory.window.console.log(`【WINDOW PROXY】${t}: ${r.join(" = ")}`)}:n,t.parse="function"==typeof(r=t.parse)?r:t=>t})),e.getTools("wrapFunc")(n,"runInContext",((i,s,c="window",a={})=>{const u=Object.create(null);if("window"===c||"[object Window]"===String(c)){"window"!==c&&(o.ori=c);const l={has:(e,n)=>(r&&t.log&&t.log("has",String(n)),!t.windowGetterUndefinedKeys.includes(n)&&t.parse(Reflect.has(o.ori,n),"has")),deleteProperty:(e,n)=>(r&&t.log&&t.log("deleteProperty",String(n)),t.parse(Reflect.deleteProperty(o.ori,n),"deleteProperty")),ownKeys:e=>(r&&t.log&&t.log("ownKeys"),t.parse(Reflect.ownKeys(o.ori).filter((e=>!t.windowGetterUndefinedKeys.includes(e))),"ownKeys")),getOwnPropertyDescriptor(e,n){if(r&&t.log&&t.log("getOwnPropertyDescriptor",String(n)),t.windowGetterWinKeys.includes(n))return Reflect.getOwnPropertyDescriptor(e,n);const i=Reflect.getOwnPropertyDescriptor(o.ori,n);let s=Reflect.getOwnPropertyDescriptor(e,n);return s||!1!==i?.configurable||(Object.defineProperty(e,n,{...i,configurable:!0}),s=Reflect.getOwnPropertyDescriptor(e,n)),t.parse(s||i,"getOwnPropertyDescriptor")},defineProperty:(e,n,i)=>(r&&t.log&&t.log(`defineProperty: ${String(n)}`),t.parse(Reflect.defineProperty(o.ori,n,i),"defineProperty")),preventExtensions:e=>(r&&t.log&&t.log("preventExtensions"),t.parse(Reflect.preventExtensions(o.ori),"preventExtensions")),isExtensible:e=>(r&&t.log&&t.log("isExtensible"),t.parse(Reflect.isExtensible(o.ori),"isExtensible")),getPrototypeOf:e=>(r&&t.log&&t.log("getPrototypeOf"),t.parse(Reflect.getPrototypeOf(o.ori),"getPrototypeOf")),setPrototypeOf:(e,n)=>(r&&t.log&&t.log("setPrototypeOf"),t.parse(Reflect.setPrototypeOf(o.ori,n),"setPrototypeOf")),get(s,c){if(r&&!["devtoolsFormatters"].includes(c)&&t.log&&t.log("get",String(c)),t.windowGetterWinKeys.includes(c))return o.win;if(!t.windowGetterUndefinedKeys.includes(c)){if("eval"===c)return e.tools.setFuncNative((t=>"function"==typeof t?t():t.includes("window")?i(t,n.createContext(o.context),a):o.ori.eval(t)),"eval",1);if(!Reflect.has(o.ori,c)&&t.windowGetterErrorKeys.includes(c))throw new ReferenceError(`${c} is not defined`);return t.parse(Reflect.get(o.ori,c),"get")}},set:(e,n,i)=>(r&&t.log&&t.log("set",String(n),i),!t.windowGetterWinKeys.includes(n)&&t.parse(Reflect.set(o.ori,String(n),i),"set"))};o.context||(o.context=new Proxy(u,l),t.windowGetterWinKeys.forEach((t=>{o.context[t]=o.context})),o.proxyRecord.set(o.context,!0),o.func=i("(function(){ return (function(){}).constructor })()",n.createContext(o.context)),e.getTools("setToString")(o.func.prototype),o.context.Window.constructor=o.context.Function=o.func),o.win||(o.win=new Proxy(u,l),t.windowGetterWinKeys.forEach((t=>{o.win[t]=o.win})),o.proxyRecord.set(o.win,!0),o.win.Function=o.func);const f=n.createContext(o.context);return r=!0,i(t.parse(s,"code",c),f,a)}return i(s,c,a)}))}});return class{constructor(t,e=void 0){e||(window?e=window:global&&(e=global)),Object.assign(this,se({},Se,t||{},{tools:ir,adapt:ar})),e.sdenv?this.config.envType=e.sdenv.config.envType:this.config.isNode&&(this.config.envType="node"),this.setWindow(e),Gn.call(this),this.bindThis(),e.sdenv=this,this.configPools={}}bindThis(){const t=this;function e(n){Object.entries(n).forEach((([r,o])=>{"function"!=typeof o?e(o):n[r]=o.bind(t)}))}["tools","adapt"].forEach((t=>{e(this[t])}))}setWindow(t){const e=this.memory;e.window=t;for(let n of Object.keys(Sr).filter((t=>t.endsWith("Init"))))if("function"==typeof Sr[n])Sr[n].call(this,e);else if(Array.isArray(Sr[n]))for(let r of Sr[n])e[r]=Re(t,r)||null;this.config.isNode&&t.Window&&Object.setPrototypeOf(t.window,t.Window.prototype)}_registerConfig(t,e,n){n(),this.configPools[t]=t=>{"object"==typeof t&&n(se(e,t))}}getConfig(t){const e=`handle:${t}`;return this.configPools[e]||console.warn(`handle:${t} 不存在或未注册请检查！`),this.configPools[e]}getHandle(t){const e=`${t}Handle`;if(Sr[e])return(...t)=>(Sr[e].call(this,...t),this)}getTools(t){if(ir[t])return(...e)=>ir[t].call(this,...e)}getUtils(t){if(utils[t])return(...e)=>utils[t].call(this,...e)}}}();SdenvExtend.version="V1.8.2",SdenvExtend.buildTime="2025-12-22T05:02:56.849Z";
